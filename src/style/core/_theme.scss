/* Usage
@include theme(background-color, color(primary), color(secondary));
*/

@mixin theme($var, $light, $dark: '', $root: '') {
  $isCssVar: str-slice($var, 1, 2) == '--';

  @if ($dark == '') {
    $dark: $light;
  }

  #{$root} & {
    #{$var}: $light;
    @if ($isCssVar) {
      #{$var}-inv: $dark;
    }
  }
  
  @media (prefers-color-scheme: dark) {
    #{$root} & {
      #{$var}: $dark;
      @if ($isCssVar) {
        #{$var}-inv: $light;
      }
    }
  }

  // Force for non-body elements overrides
  #{$root}.light-theme & {
    #{$var}: $light;
    @if ($isCssVar) { #{$var}-inv: $dark; }
  }

  #{$root}.dark-theme & {
    #{$var}: $dark;
    @if ($isCssVar) { #{$var}-inv: $light; }
  }
}
@function inv($var) {
  @return str-slice($var, 1, -2) + "-inv)";
}

#app {
  @include theme(--colorText, color(tertiary, -3), color(quaternary, 2));
  @include theme(--colorTextDetail, color(tertiary, 1), color(quaternary, -1));

  @include theme(--colorBackground, color(quaternary, 2), color(tertiary, -1));
  @include theme(--colorBackgroundDeep, color(quaternary, 1), color(tertiary, -2));
}